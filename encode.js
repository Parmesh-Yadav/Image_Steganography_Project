var imgdatauri,resultimg,iv="cfe68d09f67a2a32b20a145b9c4db0f4",text=document.querySelector("#data-box").value,mail=document.querySelector("#email").value,len=mail.length,leng=len.toString(),ciphertext=CryptoJS.AES.encrypt(text,mail).toString(),resulttxt=leng+mail+ciphertext;class HuffmanNode{constructor(e,t,n=null,i=null){this.character=e,this.frequency=t,this.leftChild=n,this.rightChild=i}isLeaf(){return!this.leftChild&&!this.rightChild}}function buildFrequencyTable(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];t[i]?t[i]++:t[i]=1}return t}function buildHuffmanTree(e){const t=[];for(const n in e){const i=e[n],r=new HuffmanNode(n,i);t.push(r)}for(;t.length>1;){t.sort((e,t)=>e.frequency-t.frequency);const e=t.shift(),n=t.shift(),i=new HuffmanNode("",e.frequency+n.frequency,e,n);t.push(i)}return t[0]}function buildEncodingTable(e,t=""){const n={};if(e.isLeaf())n[e.character]=t;else{const i=buildEncodingTable(e.leftChild,t+"0"),r=buildEncodingTable(e.rightChild,t+"1");Object.assign(n,i,r)}return n}function encode(e){const t=buildEncodingTable(buildHuffmanTree(buildFrequencyTable(e)));let n="";for(let i=0;i<e.length;i++){n+=t[e[i]]}return n}function decode(e,t){let n="",i=t;for(let r=0;r<e.length;r++){(i="0"===e[r]?i.leftChild:i.rightChild).isLeaf()&&(n+=i.character,i=t)}return n}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){imgdatauri=e.target.result,document.querySelector("#img1").src=imgdatauri}}t.readAsDataURL(e.files[0])}function downloadImage(e,t){var n=document.createElement("canvas"),i=n.getContext("2d"),r=new Image;r.onload=function(){n.width=r.width,n.height=r.height,i.drawImage(r,0,0);var e=n.toDataURL("image/png"),l=document.createElement("a");l.href=e,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l)},r.src=e}function hidetext(){var e=document.querySelector("#data-box").value,t=document.querySelector("#email").value,n=t.length.toString()+t+CryptoJS.AES.encrypt(e,t).toString();resultimg=steg.encode(n,imgdatauri),console.log(n),downloadImage(resultimg,"my-image.jpg")}