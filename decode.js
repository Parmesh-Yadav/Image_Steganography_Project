class HuffmanNode{constructor(e,t,n=null,i=null){this.character=e,this.frequency=t,this.leftChild=n,this.rightChild=i}isLeaf(){return!this.leftChild&&!this.rightChild}}function buildFrequencyTable(e){const t={};for(let n=0;n<e.length;n++){const i=e[n];t[i]?t[i]++:t[i]=1}return t}function buildHuffmanTree(e){const t=[];for(const n in e){const i=e[n],l=new HuffmanNode(n,i);t.push(l)}for(;t.length>1;){t.sort((e,t)=>e.frequency-t.frequency);const e=t.shift(),n=t.shift(),i=new HuffmanNode("",e.frequency+n.frequency,e,n);t.push(i)}return t[0]}function buildEncodingTable(e,t=""){const n={};if(e.isLeaf())n[e.character]=t;else{const i=buildEncodingTable(e.leftChild,t+"0"),l=buildEncodingTable(e.rightChild,t+"1");Object.assign(n,i,l)}return n}function encode(e){const t=buildEncodingTable(buildHuffmanTree(buildFrequencyTable(e)));let n="";for(let i=0;i<e.length;i++){n+=t[e[i]]}return n}function decode(e,t){let n="",i=t;for(let l=0;l<e.length;l++){(i="0"===e[l]?i.leftChild:i.rightChild).isLeaf()&&(n+=i.character,i=t)}return n}var imgdatauri,resultimg;function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){imgdatauri=e.target.result,document.querySelector("#img1").src=imgdatauri}}t.readAsDataURL(e.files[0])}function downloadImage(e,t){var n=document.createElement("canvas"),i=n.getContext("2d"),l=new Image;l.onload=function(){n.width=l.width,n.height=l.height,i.drawImage(l,0,0);var e=n.toDataURL("image/png"),r=document.createElement("a");r.href=e,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)},l.src=e}function hidetext(){resultimg=steg.decode(imgdatauri);var e=parseInt(resultimg.slice(0,2)),t=resultimg.slice(2,2+e),n=resultimg.slice(2+e),i=CryptoJS.AES.decrypt(n,t).toString(CryptoJS.enc.Utf8);Email.send({Host:"smtp.elasticemail.com",Username:"silverbulletdodged@gmail.com",Password:"50A16CB6BCD1219FB7EB376FF76186CC4CFD",To:t,From:"silverbulletdodged@gmail.com",Subject:"Steganography code",Body:i}).then(function(e){alert("mail sent successfully")})}